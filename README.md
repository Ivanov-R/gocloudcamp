# Тестовое задание для поступления в GoCloudCamp

## 1. Вопросы для разогрева

#### 1. Опишите самую интересную задачу в программировании, которую вам приходилось решать?

На данный момент самой интересной задачей (одновременно и самой масштабной) была реализация дипломного проекта - backend сервиса продуктового помощника. С его помощью
можно публиковать рецепты, подписываться на публикации других пользователей, добавлять понравившиеся рецепты в «Избранное» и т.д. Пришлось продумать достаточно объемную структуру взаимодействия моделей, реализовать большое количество сериализаторов, добавить фильтрацию запросов. Также необходимо было настроить взаимодействие пользователей с системой,  разграничить права доступа. 

Отдельно хотел бы отметить алгоритмические задачи, которые довелось решить за время обучения. Мне очень интересно обдумывать подход к их решению, пробовать различные варианты.

#### 2. Расскажите о своем самом большом факапе? Что вы предприняли для решения проблемы?

Если дело касается программирования, то факапов как таковых не было, т.к. я еще не принимал участия в реальных проектах. А вот процесс обучения наверно можно назвать постоянным факапом;) Потому что сталкиваешься с таким кол-вом новых ошибок, что кажется - они не закончатся никогда))
А в обычной жизни неприятности, конечно, случаются. Из значимых - на одном из строительных объектов я был ответственен за заказ материалов для монтажа слаботочных систем и контролировал работу подрядчика, который должен был их смонтировать. Когда согласовывал и заказывал материалы - не обратил внимание, что в проекте неправильно подобраны вертикальные органайзеры для серверных стоек. Это обнаружилось только в процессе монтажа, когда до сдачи оставалось чуть больше месяца. А срок поставки необходимых органайзеров составлял 6-8 недель (доставка из Европы). Рассматривал разные варианты, вплоть до срочной доставки материалов самолетом, но в итоге вышел из ситуации по-другому - договорился с заказчиком о сдаче в эксплуатацию системы СКС без этих органайзеров, т.к. не влияет на работоспособность системы, а затем в одни из выходных дней (уже после сдачи объекта) организовал монтаж доставленных деталей стоек.

#### 3. Каковы ваши ожидания от участия в буткемпе?

Хотелось бы поучаствовать в реальных проектах, набраться опыта (в том числе в тех областях, которые еще не довелось изучать) и попасть в команду sbercloud в качестве нового сотрудника :)

---

## 2. Distributed config

### Описание

Сервис, который позволяет динамически управлять конфигурацией приложений. Доступ к сервису осуществляется с помощью API. Конфигурация хранится в базе данных. 

### Технические характеристики

* реализовано на Python
* формат схемы конфига: json
* сервис обеспечивает персистентность данных
* сервис поддерживает все CRUD операции по работе с конфигом
* сервис поддерживает версионирование конфига при его изменении
* удалять конфиг допускается только если он не используется никаким приложением
* создан Dockerfile и docker-compose.yml
* реализованы unit-тесты

Ремарка: связь конфига и пар ключ-значение реализованы как Многие-ко-многим, хотя можно было конечно и через Один-ко-многим сделать.
Таким образом мы уменьшаем избыточность данных.
Данные не изменяются, а создаются новые версии. Это позволяет построить историю изменений, более эффективное хранилище (если использовать свое, а не sqlite). 

### Как развернуть проект

* Клонировать репозиторий git clone git@github.com:Ivanov-R/gocloudcamp.git
* В папке проекта установить виртуальное окружение python -m venv venv
* Активировать виртуальное окружение source venv/Scripts/activate
* Установить зависимости pip install -r requirements.txt
* Перейти в папку проекта cd gocloud/
* Создать миграции python manage.py makemigrations
* Запустить миграции python manage.py migrate (если таблицы config, keyvalue и configkeyvalue не будут созданы, то применить вместе с ключом --run-syncdb)
* Запустить сервер python manage.py runserver 8080

### Пример использования сервиса

#### Создание конфига

`curl -d "@data.json" -H "Content-Type: application/json" -X POST http://localhost:8080/config`

```json
{
    "service": "managed-k8s",
    "data": [
        {"key1": "value1"},
        {"key2": "value2"}
    ]
}
```

#### Получение конфига (если версия не указывается, то выдается последняя)

`curl http://localhost:8080/config?service=managed-k8s`

```json
{"key1": "value1", "key2": "value2"}
```

#### Удаление конфига

`curl http://localhost:8080/config?service=managed-k8s&version=1`

```json
{"message": "Version of config deleted successfully"}
```

---

